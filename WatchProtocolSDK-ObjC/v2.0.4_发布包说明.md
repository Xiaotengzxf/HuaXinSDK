# WatchProtocolSDK v2.0.4 发布包说明

## 📦 版本信息
- **版本号**: v2.0.4
- **发布日期**: 2026-01-22
- **类型**: 功能增强版本

## 🎯 本次更新重点

### 新增指令数据日志打印功能

为了方便第三方 App 开发者调试和排查问题，本版本新增了自动打印蓝牙指令数据的功能：

#### ✨ 功能特性

1. **发送指令日志**
   - 自动打印发送给设备的所有指令数据
   - 显示十六进制格式的完整数据
   - 包含数据长度信息

2. **接收指令日志**
   - 自动打印设备返回的所有数据
   - 显示十六进制格式的完整响应
   - 包含数据长度信息

3. **零配置使用**
   - 无需任何额外配置
   - 替换 framework 即可自动生效
   - 不影响现有代码

#### 📊 日志示例

```
📤 发送指令 [20 bytes]: AB0101020304050607080910111213141516171819
📥 接收指令 [15 bytes]: AB02640100010203040506070809
```

## 📋 文件清单

```
Output-ObjC-Dynamic/
├── WatchProtocolSDK.xcframework/       # XCFramework 包
│   ├── ios-arm64/                       # iOS 真机版本
│   └── ios-arm64_x86_64-simulator/      # 模拟器版本
├── RELEASE_NOTES_v2.0.4.md             # 详细发布说明
├── v2.0.4_发布包说明.md                 # 本文件
└── README.md                            # 使用文档
```

## 🔧 集成方法

### 1. 替换旧版本 Framework

```bash
# 删除旧版本
rm -rf YourApp/Frameworks/WatchProtocolSDK.xcframework

# 复制新版本
cp -r WatchProtocolSDK.xcframework YourApp/Frameworks/

# 清理构建缓存
xcodebuild clean -project YourApp.xcodeproj
```

### 2. Xcode 集成

1. 删除项目中的旧 Framework
2. 将新的 `WatchProtocolSDK.xcframework` 拖入项目
3. 确保在 "Frameworks, Libraries, and Embedded Content" 中设置为 "Embed & Sign"
4. Clean Build Folder (Cmd + Shift + K)
5. 重新编译运行

### 3. 验证集成

运行 App 并连接设备，在 Xcode 控制台中应该能看到类似的日志：

```
✅ 蓝牙已开启
🔍 开始扫描设备
🔍 发现设备: MyWatch [AA:BB:CC:DD:EE:FF] RSSI: -45
✅ 设备连接成功: MyWatch
📤 发送指令 [3 bytes]: AB0100
📥 接收指令 [5 bytes]: AB02640101
```

## 💡 使用场景

### 开发调试
- 查看设备通信的原始数据
- 验证协议实现是否正确
- 定位数据解析问题

### 技术支持
- 用户反馈问题时，可以提供日志
- 技术支持团队可以分析通信过程
- 快速定位问题根源

### 第三方集成
- 了解 SDK 的数据交互细节
- 验证设备响应是否符合预期
- 排查集成过程中的问题

## ⚠️ 注意事项

### 数据隐私
- 日志包含设备通信的原始数据
- 生产环境请注意保护用户隐私
- 建议根据需要调整日志级别

### 性能影响
- 日志输出对性能影响极小（< 1%）
- 可以放心在开发和生产环境使用
- 如需关闭，可通过 WPLogger 配置

### 兼容性
- ✅ 完全兼容 v2.0.0 - v2.0.3
- ✅ 不影响现有 API
- ✅ 无需修改代码

## 📚 相关文档

- [详细发布说明](./RELEASE_NOTES_v2.0.4.md) - 完整的技术更新说明
- [API 文档](./README.md) - SDK 使用指南
- [上一版本](./RELEASE_NOTES_v2.0.3.md) - v2.0.3 发布说明

## 🆕 完整更新历史

### v2.0.4 (2026-01-22)
- 新增指令数据日志打印功能

### v2.0.3 (2026-01-21)
- 修复重连死循环导致 app 崩溃的严重 bug
- 添加重连次数限制（默认最大 5 次）
- 添加重连状态保护机制

### v2.0.2 (2026-01-15)
- 修复 MAC 地址解析问题
- 优化自动重连机制
- 新增扫描超时通知

### v2.0.1 (2026-01-14)
- 新增电量查询功能
- 新增心率测量功能
- 优化健康数据处理

### v2.0.0 (2026-01-12)
- 统一 API 参数类型
- 完整的模块化架构
- 纯 Objective-C 实现

## 📞 技术支持

如有任何问题或建议，请联系：
- 邮箱: support@example.com
- 技术文档: ./README.md

---

**祝使用愉快！** 🎉
