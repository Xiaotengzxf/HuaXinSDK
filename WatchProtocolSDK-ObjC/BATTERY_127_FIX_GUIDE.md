# ç”µé‡å€¼ 127 é—®é¢˜å¿«é€Ÿä¿®å¤æŒ‡å—

## ðŸŽ¯ å¿«é€Ÿæ¦‚è§ˆ

**é—®é¢˜**ï¼šéƒ¨åˆ†è®¾å¤‡è¿”å›žç”µé‡å€¼ 127ï¼Œè¶…å‡º 0~100 èŒƒå›´
**ä¿®å¤**ï¼šå‡çº§åˆ° WatchProtocolSDK-ObjC v2.0.2
**éš¾åº¦**ï¼šâ­ ç®€å•ï¼ˆä»…éœ€æ›¿æ¢ Frameworkï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼‰
**è€—æ—¶**ï¼š5 åˆ†é’Ÿ

## âœ… ä¸€å¥è¯æ€»ç»“

**å°†é¡¹ç›®ä¸­çš„ `WatchProtocolSDK.xcframework` æ›¿æ¢ä¸º v2.0.2 ç‰ˆæœ¬ï¼ŒSDK ä¼šè‡ªåŠ¨å°†å¼‚å¸¸å€¼ 127 ä¿®æ­£ä¸º 100ã€‚**

## ðŸ“‹ å‡çº§æ­¥éª¤

### æ­¥éª¤ 1ï¼šå¤‡ä»½æ—§ç‰ˆæœ¬ï¼ˆæŽ¨èï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
cp -r path/to/WatchProtocolSDK.xcframework path/to/WatchProtocolSDK.xcframework.backup
```

### æ­¥éª¤ 2ï¼šåˆ é™¤æ—§ Framework

1. åœ¨ Xcode é¡¹ç›®å¯¼èˆªå™¨ä¸­æ‰¾åˆ° `WatchProtocolSDK.xcframework`
2. å³é”® â†’ **Delete** â†’ **Move to Trash**

### æ­¥éª¤ 3ï¼šæ·»åŠ æ–° Framework

1. å°† v2.0.2 çš„ `WatchProtocolSDK.xcframework` æ‹–å…¥é¡¹ç›®
2. å‹¾é€‰ **"Copy items if needed"**
3. ç¡®è®¤ **Target** å·²é€‰ä¸­

### æ­¥éª¤ 4ï¼šéªŒè¯ Embed è®¾ç½®

1. é€‰æ‹©é¡¹ç›® Target
2. æ‰“å¼€ **General** æ ‡ç­¾é¡µ
3. åœ¨ **Frameworks, Libraries, and Embedded Content** ä¸­æ‰¾åˆ° `WatchProtocolSDK.xcframework`
4. ç¡®è®¤ **Embed** è®¾ç½®ä¸º **"Embed & Sign"**

### æ­¥éª¤ 5ï¼šæ¸…ç†å¹¶é‡æ–°ç¼–è¯‘

```bash
# æ–¹æ³• 1ï¼šXcode èœå•æ 
# Product â†’ Clean Build Folder (å¿«æ·é”®ï¼šâ‡§âŒ˜K)

# æ–¹æ³• 2ï¼šå‘½ä»¤è¡Œï¼ˆæŽ¨èï¼‰
rm -rf ~/Library/Developer/Xcode/DerivedData/*
```

### æ­¥éª¤ 6ï¼šè¿è¡Œå¹¶éªŒè¯

è¿è¡Œ Appï¼ŒæŸ¥è¯¢ç”µé‡ï¼š

```objc
// å¯ç”¨ SDK æ—¥å¿—ï¼ˆæŸ¥çœ‹ä¿®å¤æ•ˆæžœï¼‰
[[WPLogger sharedInstance] setLogEnabled:YES];

// æŸ¥è¯¢ç”µé‡
[[WPBluetoothManager sharedInstance] queryBatteryLevel];

// åœ¨ä»£ç†å›žè°ƒä¸­éªŒè¯
- (void)didReceiveBatteryLevel:(NSInteger)batteryLevel isCharging:(BOOL)isCharging {
    // éªŒè¯ï¼šbatteryLevel åº”è¯¥åœ¨ 0~100 èŒƒå›´å†…
    NSLog(@"ç”µé‡: %ld%%", (long)batteryLevel);

    // å¦‚æžœè®¾å¤‡è¿”å›ž 127ï¼ŒSDK ä¼šè‡ªåŠ¨ä¿®æ­£ä¸º 100
    // å¹¶åœ¨æ—¥å¿—ä¸­è¾“å‡ºè­¦å‘Šï¼ˆè§ä¸‹æ–¹"é¢„æœŸæ—¥å¿—"ï¼‰
}
```

## ðŸ“Š é¢„æœŸæ—¥å¿—

### æ­£å¸¸è®¾å¤‡ï¼ˆè¿”å›ž 50%ï¼‰

```
ðŸ”‹ ç”µé‡:50% å……ç”µçŠ¶æ€:æœªå……ç”µ
```

### å¼‚å¸¸è®¾å¤‡ï¼ˆè¿”å›ž 127ï¼Œå·²è‡ªåŠ¨ä¿®å¤ï¼‰

```
âš ï¸ ç”µé‡å€¼å¼‚å¸¸:127 (è¶…å‡ºèŒƒå›´)ï¼Œå·²ä¿®æ­£ä¸º:100
ðŸ”‹ ç”µé‡:100% å……ç”µçŠ¶æ€:æœªå……ç”µ
```

## âœ¨ ä¿®å¤æ•ˆæžœå¯¹æ¯”

| è®¾å¤‡è¿”å›žå€¼ | v2.0.1ï¼ˆæ—§ç‰ˆï¼‰ | v2.0.2ï¼ˆæ–°ç‰ˆï¼‰ | çŠ¶æ€ |
|-----------|--------------|--------------|------|
| 0x00 (0%) | 0% | 0% | âœ… æ­£å¸¸ |
| 0x32 (50%) | 50% | 50% | âœ… æ­£å¸¸ |
| 0x64 (100%) | 100% | 100% | âœ… æ­£å¸¸ |
| **0x7F (127%)** | **127%** âš ï¸ | **100%** âœ… | **å·²ä¿®å¤** |
| 0xFF (127%+å……ç”µ) | 127% | 100% | âœ… å·²ä¿®å¤ |

## ðŸ” å¦‚ä½•éªŒè¯ä¿®å¤æˆåŠŸ

### æ–¹æ³• 1ï¼šæŸ¥çœ‹æ—¥å¿—

å¦‚æžœè®¾å¤‡ä¹‹å‰è¿”å›ž 127ï¼Œå‡çº§åŽä¼šçœ‹åˆ°è­¦å‘Šæ—¥å¿—ï¼š

```
âš ï¸ ç”µé‡å€¼å¼‚å¸¸:127 (è¶…å‡ºèŒƒå›´)ï¼Œå·²ä¿®æ­£ä¸º:100
```

### æ–¹æ³• 2ï¼šæ–­è¨€éªŒè¯

åœ¨ä»£ç†å›žè°ƒä¸­æ·»åŠ æ–­è¨€ï¼š

```objc
- (void)didReceiveBatteryLevel:(NSInteger)batteryLevel isCharging:(BOOL)isCharging {
    // éªŒè¯ç”µé‡å€¼åœ¨ 0~100 èŒƒå›´å†…
    NSAssert(batteryLevel >= 0 && batteryLevel <= 100,
             @"ç”µé‡å€¼è¶…å‡ºèŒƒå›´: %ld", (long)batteryLevel);

    // å¦‚æžœæ²¡æœ‰è§¦å‘æ–­è¨€ï¼Œè¯´æ˜Žä¿®å¤æˆåŠŸ âœ…
    self.batteryLabel.text = [NSString stringWithFormat:@"%ld%%", (long)batteryLevel];
}
```

### æ–¹æ³• 3ï¼šUI æ£€æŸ¥

- **ä¿®å¤å‰**ï¼šç”µé‡å¯èƒ½æ˜¾ç¤º "127%"
- **ä¿®å¤åŽ**ï¼šç”µé‡æœ€å¤šæ˜¾ç¤º "100%"

## ðŸŽ¯ å¸¸è§é—®é¢˜

### Q1: éœ€è¦ä¿®æ”¹ä»£ç å—ï¼Ÿ

**A**: âŒ **ä¸éœ€è¦**ã€‚ä»…éœ€æ›¿æ¢ Frameworkï¼ŒSDK è‡ªåŠ¨å¤„ç†ã€‚

### Q2: ä¼šå½±å“æ­£å¸¸è®¾å¤‡å—ï¼Ÿ

**A**: âŒ **ä¸ä¼š**ã€‚æ­£å¸¸è®¾å¤‡ï¼ˆç”µé‡å€¼ â‰¤ 100ï¼‰å®Œå…¨ä¸å—å½±å“ã€‚

### Q3: å¦‚æžœå‡çº§åŽè¿˜æ˜¯æ˜¾ç¤º 127ï¼Ÿ

**A**: è¯·æ£€æŸ¥ï¼š

1. **æ˜¯å¦çœŸçš„æ›¿æ¢äº† Frameworkï¼Ÿ**
   ```bash
   # æ£€æŸ¥ Framework ç‰ˆæœ¬
   strings path/to/WatchProtocolSDK.xcframework/ios-arm64/WatchProtocolSDK.framework/WatchProtocolSDK \
     | grep "2.0.2"
   # åº”è¯¥èƒ½çœ‹åˆ° "2.0.2"
   ```

2. **æ˜¯å¦æ¸…ç†äº† Buildï¼Ÿ**
   ```bash
   # æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
   rm -rf ~/Library/Developer/Xcode/DerivedData/*
   ```

3. **æ˜¯å¦æ˜¯ç¼“å­˜é—®é¢˜ï¼Ÿ**
   - å®Œå…¨å¸è½½ App
   - é‡æ–°å®‰è£…

### Q4: v2.0.2 æœ‰å…¶ä»–å˜åŒ–å—ï¼Ÿ

**A**: âœ… **æ²¡æœ‰**ã€‚ä»…ä¿®å¤äº†ç”µé‡å€¼éªŒè¯é€»è¾‘ï¼ŒAPI å®Œå…¨å…¼å®¹ã€‚

### Q5: å¦‚ä½•å›žæ»šåˆ°æ—§ç‰ˆæœ¬ï¼Ÿ

**A**: å¦‚æžœå¤‡ä»½äº†æ—§ç‰ˆæœ¬ï¼Œç›´æŽ¥æ›¿æ¢å›žæ¥å³å¯ï¼š

```bash
# æ¢å¤å¤‡ä»½
rm -rf path/to/WatchProtocolSDK.xcframework
mv path/to/WatchProtocolSDK.xcframework.backup path/to/WatchProtocolSDK.xcframework
```

## ðŸ“¦ ç‰ˆæœ¬ä¿¡æ¯

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| ä¿®å¤ç‰ˆæœ¬ | v2.0.2 |
| Framework å¤§å° | 832K |
| æœ€ä½Žç³»ç»Ÿ | iOS 13.0+ |
| å‘å¸ƒæ—¥æœŸ | 2026-01-20 |
| é—®é¢˜ ID | BATTERY-127 |

## ðŸ”— ç›¸å…³æ–‡æ¡£

- **RELEASE_NOTES_v2.0.2.md** - å®Œæ•´å‘å¸ƒè¯´æ˜Ž
- **BATTERY_LEVEL_127_BUG_ANALYSIS.md** - é—®é¢˜è¯¦ç»†åˆ†æžæŠ¥å‘Š
- **v2.0.2_å‘å¸ƒåŒ…è¯´æ˜Ž.md** - å‘å¸ƒåŒ…è¯´æ˜Žæ–‡æ¡£

## ðŸ“ž èŽ·å–å¸®åŠ©

### é—®é¢˜åé¦ˆ

å¦‚æžœå‡çº§åŽä»æœ‰é—®é¢˜ï¼Œè¯·æä¾›ï¼š

1. **SDK ç‰ˆæœ¬**
   ```objc
   NSLog(@"SDK Version: %@", [[NSBundle bundleForClass:[WPBluetoothManager class]]
                               objectForInfoDictionaryKey:@"CFBundleShortVersionString"]);
   ```

2. **è®¾å¤‡ä¿¡æ¯**
   - è®¾å¤‡åž‹å·
   - å›ºä»¶ç‰ˆæœ¬
   - MAC åœ°å€ï¼ˆè„±æ•ï¼‰

3. **å®Œæ•´æ—¥å¿—**
   ```objc
   [[WPLogger sharedInstance] setLogEnabled:YES];
   // å¤åˆ¶æ‰€æœ‰ç›¸å…³æ—¥å¿—
   ```

### è”ç³»æ–¹å¼

- æŠ€æœ¯æ”¯æŒï¼šSDK æŠ€æœ¯å›¢é˜Ÿ
- é—®é¢˜è¿½è¸ªï¼šBATTERY-127

## ðŸŽ‰ æ€»ç»“

### âœ… ä¼˜ç‚¹

1. **å¿«é€Ÿ**ï¼š5 åˆ†é’Ÿå®Œæˆå‡çº§
2. **ç®€å•**ï¼šæ— éœ€ä¿®æ”¹ä»£ç 
3. **å®‰å…¨**ï¼šå‘åŽå…¼å®¹ï¼Œä¸å½±å“æ­£å¸¸åŠŸèƒ½
4. **é€æ˜Ž**ï¼šé€šè¿‡æ—¥å¿—æŸ¥çœ‹ä¿®å¤æ•ˆæžœ

### ðŸ’¡ å»ºè®®

- â­â­â­ **å¼ºçƒˆæŽ¨è**æ‰€æœ‰ç”¨æˆ·å‡çº§
- ç‰¹åˆ«æ˜¯é‡åˆ°ç”µé‡å€¼å¼‚å¸¸çš„ç”¨æˆ·
- å‡çº§é£Žé™©æžä½Žï¼Œæ”¶ç›Šæ˜Žæ˜¾

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**æ›´æ–°æ—¥æœŸ**ï¼š2026-01-20
**é€‚ç”¨äºŽ**ï¼šWatchProtocolSDK-ObjC v2.0.2
**é—®é¢˜ ID**ï¼šBATTERY-127
